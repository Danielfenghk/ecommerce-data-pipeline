# _staging.yml - Source definitions and documentation

version: 2

sources:
  - name: raw
    description: "Raw data loaded from source systems"
    database: ecommerce_warehouse
    schema: public

    tables:
      - name: customers
        description: "Customer data from source system"
        columns:
          - name: customer_id
            description: "Unique customer identifier"
            tests:
              - unique
              - not_null
          - name: email
            description: "Customer email address"
            tests:
              - unique
          - name: customer_segment
            description: "Customer classification"
            tests:
              - accepted_values:
                  values: ['Premium', 'Regular', 'New', 'VIP']

      - name: products
        description: "Product catalog from source"
        columns:
          - name: product_id
            description: "Unique product identifier"
            tests:
              - unique
              - not_null
          - name: price
            description: "Product selling price"
            tests:
              - not_null

      - name: orders
        description: "Order transactions"
        columns:
          - name: order_id
            description: "Unique order identifier"
            tests:
              - unique
              - not_null
          - name: total_amount
            description: "Total order amount"
            tests:
              - not_null

models:
  - name: stg_customers
    description: "Staged and cleaned customer data"
    columns:
      - name: customer_id
        tests:
          - unique
          - not_null

  - name: stg_products
    description: "Staged and cleaned product data"

  - name: stg_orders
    description: "Staged and cleaned order data"